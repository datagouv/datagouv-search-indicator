{"version":3,"sources":["webpack:///./src/run/datatable.vue?6afc","webpack:///./src/query/param-list.vue?f59c","webpack:///./src/facets.js","webpack:///src/query/param-list.vue","webpack:///./src/query/param-list.vue?aca4","webpack:///./src/query/param-list.vue","webpack:///./src/run/datatable.vue?ea8e","webpack:///./src/run/datatable.vue?053a","webpack:///./src/run/datatable.vue?6c8a","webpack:///src/run/datatable.vue","webpack:///./src/run/datatable.vue?2567","webpack:///./src/run/datatable.vue"],"names":["content","__webpack_require__","module","i","options","sourceMap","hmr","transform","insertInto","undefined","locals","exports","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","allParams","length","expression","_l","param","key","attrs","variant","title","label","icon","prefix","iconPrefix","iconName","_v","_s","_withStripped","facets","organization","tag","license","badge","temporal_coverage","geozone","granularity","format","resource_type","reuses","icons","followers","query_param_listvue_type_script_lang_js_","props","params","Object","computed","_loop","_Object$entries$_i","_slicedToArray","_Object$entries","_i","Array","isArray","forEach","entry","push","entries","map","assign","component","componentNormalizer","__file","__webpack_exports__","_node_modules_style_loader_index_js_ref_2_0_node_modules_css_loader_dist_cjs_js_ref_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_2_2_node_modules_vue_loader_lib_index_js_vue_loader_options_datatable_vue_vue_type_style_index_0_id_350e10d7_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","n","version","sources","names","mappings","file","sourcesContent","justified","slot","models","m","active","model","on","click","$event","setModel","plural","queryCounter","striped","outlined","hover","show-empty","items","queries","fields","empty-text","tbody-tr-class","rowClass","row-clicked","display","scopedSlots","_u","fn","data","item","query","found","rank","error","page","total","run_datatablevue_type_script_lang_js_","components","ParamsList","param_list","sortable","class","_objectSpread","_this","details","filter","vuex_esm","methods","$router","domain","date","uid","type","classes","config","minRank"],"mappings":"6EACA,IAAAA,EAAcC,EAAQ,KAEtB,iBAAAD,MAAA,EAA4CE,EAAAC,EAASH,EAAA,MAOrD,IAAAI,EAAA,CAAeC,WAAA,EAAAC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAC,GAEaR,EAAQ,IAARA,CAA2DD,EAAAI,GAExEJ,EAAAU,SAAAR,EAAAS,QAAAX,EAAAU,0CCjBA,IAAAE,EAAA,WACA,IAAAC,EAAAC,KACAC,EAAAF,EAAAG,eACAC,EAAAJ,EAAAK,MAAAD,IAAAF,EACA,OAAAE,EACA,MACA,CACAE,WAAA,CACA,CACAC,KAAA,OACAC,QAAA,SACAC,MAAAT,EAAAU,UAAAC,OACAC,WAAA,sBAIAZ,EAAAa,GAAAb,EAAAU,UAAA,SAAAI,GACA,OAAAV,EACA,UACA,CAASW,IAAAD,EAAAC,IAAAC,MAAA,CAAyBC,QAAA,UAAAC,MAAAJ,EAAAK,QAClC,CACAf,EAAA,qBACAY,MAAA,CACAI,KAAA,CAAqBC,OAAAP,EAAAQ,YAAA,MAAAC,SAAAT,EAAAM,SAGrBpB,EAAAwB,GAAA,SAAAxB,EAAAyB,GAAAX,EAAAL,OAAA,SAEA,KAGA,IAIAV,EAAA2B,eAAA,ECnCe,IAAAC,EAAA,CACbC,aAAc,CACZT,MAAO,eACPC,KAAM,WACNE,WAAY,OAEdO,IAAK,CACHV,MAAO,MACPC,KAAM,OAERU,QAAS,CACPX,MAAO,UACPC,KAAM,aAERW,MAAO,CACLZ,MAAO,QACPC,KAAM,YAERY,kBAAmB,CACjBb,MAAO,oBACPC,KAAM,YAERa,QAAS,CACPd,MAAO,mBACPC,KAAM,cAERc,YAAa,CACXf,MAAO,sBACPC,KAAM,YAERe,OAAQ,CACNhB,MAAO,SACPC,KAAM,QAERgB,cAAe,CACbjB,MAAO,gBACPC,KAAM,OACNE,WAAW,OAEbe,OAAQ,CACNlB,MAAO,SACPmB,MAAO,WAETC,UAAW,CACTpB,MAAO,YACPC,KAAM,0ZCjCV,ICZ0LoB,EDY1L,CACAjC,KAAA,cACAkC,MAAA,CACAC,OAAAC,QAEAC,SAAA,CACAlC,UADA,WAGA,IADA,IAAAgC,EAAA,GADAG,EAAA,eAAAC,EAAAC,EAAAC,EAAAC,GAAA,GAEAlC,EAFA+B,EAAA,GAEArC,EAFAqC,EAAA,GAGAI,MAAAC,QAAA1C,GACAA,EAAA2C,QAAA,SAAAC,GACAX,EAAAY,KAAA,CACAvC,MACAN,MAAA4C,MAIAX,EAAAY,KAAA,CACAvC,MAAAN,WAVAwC,EAAA,EAAAD,EAAAL,OAAAY,QAAAtD,KAAAyC,QAAAO,EAAAD,EAAArC,OAAAsC,IAAAJ,IAcA,OAAAH,EAAAc,IAAA,SAAA1C,GAAA,OAAA6B,OAAAc,OAAA3C,EAAAa,EAAAb,EAAAC,mBE3BA2C,EAAgBf,OAAAgB,EAAA,EAAAhB,CACdH,EACAzC,EJyBF,IIvBA,EACA,KACA,KACA,MAuBA2D,EAAAnE,QAAAqE,OAAA,2BACeC,EAAA,EAAAH,4CCtCf,IAAAI,EAAA1E,EAAA,KAAAA,EAAA2E,EAAAD,GAA4Y,wBCA5YzE,EAAAS,QAA2BV,EAAQ,IAARA,EAA2D,IAEtFkE,KAAA,CAAcjE,EAAAC,EAAS,2GAAyG,IAAS0E,QAAA,EAAAC,QAAA,sFAAAC,MAAA,GAAAC,SAAA,oBAAgJC,KAAA,yEAAAC,eAAA,+qGCFzR,IAAAtE,EAAA,WACA,IAAAC,EAAAC,KACAC,EAAAF,EAAAG,eACAC,EAAAJ,EAAAK,MAAAD,IAAAF,EACA,OAAAE,EACA,MACA,CACAA,EACA,SACA,CAASY,MAAA,CAASsD,UAAA,KAClB,CACAlE,EACA,WACA,CAAamE,KAAA,YACbvE,EAAAa,GAAAb,EAAAwE,OAAA,SAAAC,GACA,OAAArE,EACA,aACA,CACAW,IAAA0D,EAAAlE,KACAS,MAAA,CAA0B0D,OAAAD,EAAAlE,MAAAP,EAAA2E,MAAApE,MAC1BqE,GAAA,CACAC,MAAA,SAAAC,GACA,OAAA9E,EAAA+E,SAAAN,MAIA,CACAzE,EAAAwB,GAAA,aAAAxB,EAAAyB,GAAAgD,EAAAO,QAAA,KACA5E,EAAA,WAAAJ,EAAAwB,GAAAxB,EAAAyB,GAAAzB,EAAAiF,aAAAR,EAAAlE,WAEA,KAGA,IAGA,GAEAP,EAAAwB,GAAA,KACApB,EAAA,WACAY,MAAA,CACAkE,QAAA,GACAC,SAAA,GACAC,MAAA,GACAC,aAAA,GACAC,MAAAtF,EAAAuF,QACAC,OAAAxF,EAAAwF,OACAC,aAAA,iBACAC,iBAAA1F,EAAA2F,UAEAf,GAAA,CAAagB,cAAA5F,EAAA6F,SACbC,YAAA9F,EAAA+F,GAAA,CACA,CACAhF,IAAA,QACAiF,GAAA,SAAAC,GACA,OACAjG,EAAAwB,GAAA,WAAAxB,EAAAyB,GAAAwE,EAAAC,KAAAC,OAAA,YACA/F,EAAA,eAAmCY,MAAA,CAAS0B,OAAAuD,EAAAC,KAAAxD,aAI5C,CACA3B,IAAA,QACAiF,GAAA,SAAAC,GACA,OACAA,EAAAC,KAAAE,MACAhG,EAAA,qBAA6CY,MAAA,CAASI,KAAA,WACtDhB,EAAA,qBAA6CY,MAAA,CAASI,KAAA,cAItD,CACAL,IAAA,OACAiF,GAAA,SAAAC,GACA,OACAA,EAAAC,KAAAE,MACAhG,EAAA,QAAAJ,EAAAwB,GAAAxB,EAAAyB,GAAAwE,EAAAC,KAAAG,SACAjG,EAAA,qBAA6CY,MAAA,CAASI,KAAA,cAItD,CACAL,IAAA,OACAiF,GAAA,SAAAC,GACA,OACAA,EAAAC,KAAAI,MAEAlG,EAAA,qBAA6CY,MAAA,CAASI,KAAA,WADtDhB,EAAA,QAAAJ,EAAAwB,GAAAxB,EAAAyB,GAAAwE,EAAAC,KAAAK,YAKA,CACAxF,IAAA,QACAiF,GAAA,SAAAC,GACA,OACAA,EAAAC,KAAAI,MAEAlG,EAAA,qBAA6CY,MAAA,CAASI,KAAA,WADtDhB,EAAA,QAAAJ,EAAAwB,GAAAxB,EAAAyB,GAAAwE,EAAAC,KAAAM,kBAQA,IAIAzG,EAAA2B,eAAA,isBC/DA,IC7CyL+E,ED6CzL,CACAlG,KAAA,gBACAmG,WAAA,CAAAC,WAAAC,EAAA,GACAX,KAHA,WAIA,OACAT,OAAA,CACA,CAAArE,MAAA,QAAAJ,IAAA,QAAA8F,UAAA,GACA,CAAA1F,MAAA,WAAAJ,IAAA,QAAA8F,UAAA,GACA,CAAA1F,MAAA,QAAAJ,IAAA,QAAA8F,UAAA,EAAAC,MAAA,mBACA,CAAA3F,MAAA,OAAAJ,IAAA,OAAA8F,UAAA,EAAAC,MAAA,mBACA,CAAA3F,MAAA,OAAAJ,IAAA,OAAA8F,UAAA,EAAAC,MAAA,mBACA,CAAA3F,MAAA,QAAAJ,IAAA,QAAA8F,UAAA,EAAAC,MAAA,oBAEAtC,SAAA,IAGA5B,SAAAmE,EAAA,CACAzB,MADA,WACA,IAAA0B,EAAA/G,KACA,OAAAA,KAAAgH,QAAA1B,QAAA2B,OAAA,SAAAf,GAAA,OAAAA,EAAAxB,OAAAqC,EAAArC,MAAApE,SAEAoC,OAAAwE,EAAA,EAAAxE,CAAA,6CAJA,GAKAA,OAAAwE,EAAA,EAAAxE,CAAA,6BAEAyE,QAAAL,EAAA,CACAlB,QADA,SACAK,GACAjG,KAAAoH,QAAA/D,KAAA,CACA/C,KAAA,QACAmC,OAAA,CACA4E,OAAArH,KAAAqH,OACAC,KAAAtH,KAAAgH,QAAAM,KACApB,MAAAD,EAAAsB,QAIA7B,SAXA,SAWAQ,EAAAsB,GACA,GAAAtB,EAAA,CACA,IAAAuB,EAAA,cAMA,OALAvB,EAAAC,MAGAsB,EAAApE,KAAA6C,EAAAE,KAAApG,KAAA0H,OAAAC,QAAA,iCAFAF,EAAApE,KAAA,gBAIAoE,KAEA/E,OAAAwE,EAAA,EAAAxE,CAAA,iCEjFAe,EAAgBf,OAAAgB,EAAA,EAAAhB,CACd8D,EACA1G,EHiGF,IG/FA,EACA,KACA,WACA,MAuBA2D,EAAAnE,QAAAqE,OAAA,wBACeC,EAAA,QAAAH","file":"2.build.js","sourcesContent":["\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--2-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"sourceMap\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--2-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--2-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      directives: [\n        {\n          name: \"show\",\n          rawName: \"v-show\",\n          value: _vm.allParams.length,\n          expression: \"allParams.length\"\n        }\n      ]\n    },\n    _vm._l(_vm.allParams, function(param) {\n      return _c(\n        \"b-badge\",\n        { key: param.key, attrs: { variant: \"primary\", title: param.label } },\n        [\n          _c(\"font-awesome-icon\", {\n            attrs: {\n              icon: { prefix: param.iconPrefix || \"fas\", iconName: param.icon }\n            }\n          }),\n          _vm._v(\"\\n    \" + _vm._s(param.value) + \"\\n  \")\n        ],\n        1\n      )\n    }),\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export default {\n  organization: {\n    label: 'Organization',\n    icon: 'building',\n    iconPrefix: 'far'\n  },\n  tag: {\n    label: 'Tag',\n    icon: 'tag',\n  },\n  license: {\n    label: 'License',\n    icon: 'copyright',\n  },\n  badge: {\n    label: 'Badge',\n    icon: 'bookmark',\n  },\n  temporal_coverage: {\n    label: 'Temporal coverage',\n    icon: 'calendar',\n  },\n  geozone: {\n    label: 'Spatial coverage',\n    icon: 'map-marker',\n  },\n  granularity: {\n    label: 'Spatial granularity',\n    icon: 'bullseye',\n  },\n  format: {\n    label: 'Format',\n    icon: 'file',\n  },\n  resource_type: {\n    label: 'Resource type',\n    icon: 'file',\n    iconPrefix:'far',\n  },\n  reuses: {\n    label: 'Reuses',\n    icons: 'recycle',\n  },\n  followers: {\n    label: 'Followers',\n    icon: 'eye',\n  }\n}\n","<template>\n<div v-show=\"allParams.length\">\n  <b-badge v-for=\"param in allParams\" variant=\"primary\" :key=\"param.key\" :title=\"param.label\">\n    <font-awesome-icon :icon=\"{prefix: param.iconPrefix || 'fas', iconName: param.icon}\" />\n    {{ param.value }}\n  </b-badge>\n</div>\n</template>\n\n<script>\nimport facets from '../facets'\n\nexport default {\n  name: 'params-list',\n  props: {\n    params: Object,\n  },\n  computed: {\n    allParams() {\n      const params = []\n      for (const [key, value] of Object.entries(this.params)) {\n        if (Array.isArray(value)) {\n          value.forEach(entry => {\n            params.push({\n              key,\n              value: entry,\n            })\n          })\n        } else {\n          params.push({\n            key, value\n          })\n        }\n      }\n      return params.map(param => Object.assign(param, facets[param.key]))\n    }\n  },\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./param-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./param-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./param-list.vue?vue&type=template&id=83dada44&\"\nimport script from \"./param-list.vue?vue&type=script&lang=js&\"\nexport * from \"./param-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/travis/build/etalab/datagouv-search-indicator/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('83dada44')) {\n      api.createRecord('83dada44', component.options)\n    } else {\n      api.reload('83dada44', component.options)\n    }\n    module.hot.accept(\"./param-list.vue?vue&type=template&id=83dada44&\", function () {\n      api.rerender('83dada44', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/query/param-list.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/style-loader/index.js??ref--2-0!../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--2-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/style-loader/index.js??ref--2-0!../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--2-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\\ntable.table[data-v-350e10d7], table.table[data-v-350e10d7] thead th { border-top: none !important\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/home/travis/build/etalab/datagouv-search-indicator/src/run/src/run/datatable.vue\"],\"names\":[],\"mappings\":\";AA+FA,sEAAA;AAAA\",\"file\":\"datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\",\"sourcesContent\":[\"<template>\\n<div>\\n  <b-tabs justified>\\n    <!-- Add your b-tab components here -->\\n    <template slot=\\\"tabs-end\\\">\\n      <b-nav-item v-for=\\\"m in models\\\" :key=\\\"m.name\\\"\\n        :active=\\\"m.name == model.name\\\"\\n        @click=\\\"setModel(m)\\\">\\n        {{ m.plural }} <b-badge>{{ queryCounter[m.name] }}</b-badge>\\n      </b-nav-item>\\n    </template>\\n  </b-tabs>\\n  <b-table striped outlined hover show-empty\\n      :items=\\\"queries\\\" :fields=\\\"fields\\\" @row-clicked=\\\"display\\\"\\n      empty-text=\\\"Aucune requête\\\"\\n      :tbody-tr-class=\\\"rowClass\\\">\\n    <template slot=\\\"query\\\" slot-scope=\\\"data\\\">\\n      {{ data.item.query }}\\n      <params-list :params=\\\"data.item.params\\\"></params-list>\\n    </template>\\n    <template slot=\\\"found\\\" slot-scope=\\\"data\\\">\\n      <font-awesome-icon v-if=\\\"data.item.found\\\" icon=\\\"check\\\" />\\n      <font-awesome-icon v-else icon=\\\"times\\\" />\\n    </template>\\n    <template slot=\\\"rank\\\" slot-scope=\\\"data\\\">\\n      <span v-if=\\\"data.item.found\\\">{{ data.item.rank }}</span>\\n      <font-awesome-icon v-else icon=\\\"times\\\" />\\n    </template>\\n    <template slot=\\\"page\\\" slot-scope=\\\"data\\\">\\n      <span v-if=\\\"!data.item.error\\\">{{ data.item.page }}</span>\\n      <font-awesome-icon v-else icon=\\\"times\\\" />\\n    </template>\\n    <template slot=\\\"total\\\" slot-scope=\\\"data\\\">\\n      <span v-if=\\\"!data.item.error\\\">{{ data.item.total }}</span>\\n      <font-awesome-icon v-else icon=\\\"times\\\" />\\n    </template>\\n  </b-table>\\n</div>\\n</template>\\n\\n<script>\\nimport {mapState, mapGetters, mapActions} from 'vuex'\\nimport ParamsList from '../query/param-list.vue'\\nimport models from '../models'\\n\\nexport default {\\n  name: 'run-datatable',\\n  components: {ParamsList},\\n  data() {\\n    return {\\n      fields: [\\n        { label: 'Query', key: 'query', sortable: true },\\n        { label: 'Expected', key: 'title', sortable: true },\\n        { label: 'Found', key: 'found', sortable: true, class: 'text-center f85'},\\n        { label: 'Rank', key: 'rank', sortable: true, class: 'text-center f85' },\\n        { label: 'Page', key: 'page', sortable: true, class: 'text-center f85' },\\n        { label: 'Total', key: 'total', sortable: true, class: 'text-center f85' },\\n      ],\\n      models,\\n    }\\n  },\\n  computed: {\\n    items() {\\n      return this.details.queries.filter(query => query.model == this.model.name)\\n    },\\n    ...mapState(['toc', 'domain', 'details', 'config', 'model']),\\n    ...mapGetters(['queries', 'queryCounter']),\\n  },\\n  methods: {\\n    display(item) {\\n      this.$router.push({\\n        name: 'query',\\n        params: {\\n          domain: this.domain,\\n          date: this.details.date,\\n          query: item.uid\\n        }\\n      })\\n    },\\n    rowClass(query, type) {\\n      if (!query) return\\n      const classes = ['clickable']\\n      if (!query.found) {\\n        classes.push('table-danger')\\n      } else {\\n        classes.push(query.rank > this.config.minRank ? 'table-warning': 'table-success')\\n      }\\n      return classes\\n    },\\n    ...mapActions(['setModel']),\\n  }\\n}\\n</script>\\n\\n<style scoped>\\ntable.table, table.table >>> thead th { border-top: none !important }\\n</style>\\n\"]}]);\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"b-tabs\",\n        { attrs: { justified: \"\" } },\n        [\n          _c(\n            \"template\",\n            { slot: \"tabs-end\" },\n            _vm._l(_vm.models, function(m) {\n              return _c(\n                \"b-nav-item\",\n                {\n                  key: m.name,\n                  attrs: { active: m.name == _vm.model.name },\n                  on: {\n                    click: function($event) {\n                      return _vm.setModel(m)\n                    }\n                  }\n                },\n                [\n                  _vm._v(\"\\n        \" + _vm._s(m.plural) + \" \"),\n                  _c(\"b-badge\", [_vm._v(_vm._s(_vm.queryCounter[m.name]))])\n                ],\n                1\n              )\n            }),\n            1\n          )\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\"b-table\", {\n        attrs: {\n          striped: \"\",\n          outlined: \"\",\n          hover: \"\",\n          \"show-empty\": \"\",\n          items: _vm.queries,\n          fields: _vm.fields,\n          \"empty-text\": \"Aucune requête\",\n          \"tbody-tr-class\": _vm.rowClass\n        },\n        on: { \"row-clicked\": _vm.display },\n        scopedSlots: _vm._u([\n          {\n            key: \"query\",\n            fn: function(data) {\n              return [\n                _vm._v(\"\\n      \" + _vm._s(data.item.query) + \"\\n      \"),\n                _c(\"params-list\", { attrs: { params: data.item.params } })\n              ]\n            }\n          },\n          {\n            key: \"found\",\n            fn: function(data) {\n              return [\n                data.item.found\n                  ? _c(\"font-awesome-icon\", { attrs: { icon: \"check\" } })\n                  : _c(\"font-awesome-icon\", { attrs: { icon: \"times\" } })\n              ]\n            }\n          },\n          {\n            key: \"rank\",\n            fn: function(data) {\n              return [\n                data.item.found\n                  ? _c(\"span\", [_vm._v(_vm._s(data.item.rank))])\n                  : _c(\"font-awesome-icon\", { attrs: { icon: \"times\" } })\n              ]\n            }\n          },\n          {\n            key: \"page\",\n            fn: function(data) {\n              return [\n                !data.item.error\n                  ? _c(\"span\", [_vm._v(_vm._s(data.item.page))])\n                  : _c(\"font-awesome-icon\", { attrs: { icon: \"times\" } })\n              ]\n            }\n          },\n          {\n            key: \"total\",\n            fn: function(data) {\n              return [\n                !data.item.error\n                  ? _c(\"span\", [_vm._v(_vm._s(data.item.total))])\n                  : _c(\"font-awesome-icon\", { attrs: { icon: \"times\" } })\n              ]\n            }\n          }\n        ])\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <b-tabs justified>\n    <!-- Add your b-tab components here -->\n    <template slot=\"tabs-end\">\n      <b-nav-item v-for=\"m in models\" :key=\"m.name\"\n        :active=\"m.name == model.name\"\n        @click=\"setModel(m)\">\n        {{ m.plural }} <b-badge>{{ queryCounter[m.name] }}</b-badge>\n      </b-nav-item>\n    </template>\n  </b-tabs>\n  <b-table striped outlined hover show-empty\n      :items=\"queries\" :fields=\"fields\" @row-clicked=\"display\"\n      empty-text=\"Aucune requête\"\n      :tbody-tr-class=\"rowClass\">\n    <template slot=\"query\" slot-scope=\"data\">\n      {{ data.item.query }}\n      <params-list :params=\"data.item.params\"></params-list>\n    </template>\n    <template slot=\"found\" slot-scope=\"data\">\n      <font-awesome-icon v-if=\"data.item.found\" icon=\"check\" />\n      <font-awesome-icon v-else icon=\"times\" />\n    </template>\n    <template slot=\"rank\" slot-scope=\"data\">\n      <span v-if=\"data.item.found\">{{ data.item.rank }}</span>\n      <font-awesome-icon v-else icon=\"times\" />\n    </template>\n    <template slot=\"page\" slot-scope=\"data\">\n      <span v-if=\"!data.item.error\">{{ data.item.page }}</span>\n      <font-awesome-icon v-else icon=\"times\" />\n    </template>\n    <template slot=\"total\" slot-scope=\"data\">\n      <span v-if=\"!data.item.error\">{{ data.item.total }}</span>\n      <font-awesome-icon v-else icon=\"times\" />\n    </template>\n  </b-table>\n</div>\n</template>\n\n<script>\nimport {mapState, mapGetters, mapActions} from 'vuex'\nimport ParamsList from '../query/param-list.vue'\nimport models from '../models'\n\nexport default {\n  name: 'run-datatable',\n  components: {ParamsList},\n  data() {\n    return {\n      fields: [\n        { label: 'Query', key: 'query', sortable: true },\n        { label: 'Expected', key: 'title', sortable: true },\n        { label: 'Found', key: 'found', sortable: true, class: 'text-center f85'},\n        { label: 'Rank', key: 'rank', sortable: true, class: 'text-center f85' },\n        { label: 'Page', key: 'page', sortable: true, class: 'text-center f85' },\n        { label: 'Total', key: 'total', sortable: true, class: 'text-center f85' },\n      ],\n      models,\n    }\n  },\n  computed: {\n    items() {\n      return this.details.queries.filter(query => query.model == this.model.name)\n    },\n    ...mapState(['toc', 'domain', 'details', 'config', 'model']),\n    ...mapGetters(['queries', 'queryCounter']),\n  },\n  methods: {\n    display(item) {\n      this.$router.push({\n        name: 'query',\n        params: {\n          domain: this.domain,\n          date: this.details.date,\n          query: item.uid\n        }\n      })\n    },\n    rowClass(query, type) {\n      if (!query) return\n      const classes = ['clickable']\n      if (!query.found) {\n        classes.push('table-danger')\n      } else {\n        classes.push(query.rank > this.config.minRank ? 'table-warning': 'table-success')\n      }\n      return classes\n    },\n    ...mapActions(['setModel']),\n  }\n}\n</script>\n\n<style scoped>\ntable.table, table.table >>> thead th { border-top: none !important }\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./datatable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./datatable.vue?vue&type=template&id=350e10d7&scoped=true&\"\nimport script from \"./datatable.vue?vue&type=script&lang=js&\"\nexport * from \"./datatable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./datatable.vue?vue&type=style&index=0&id=350e10d7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"350e10d7\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/travis/build/etalab/datagouv-search-indicator/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('350e10d7')) {\n      api.createRecord('350e10d7', component.options)\n    } else {\n      api.reload('350e10d7', component.options)\n    }\n    module.hot.accept(\"./datatable.vue?vue&type=template&id=350e10d7&scoped=true&\", function () {\n      api.rerender('350e10d7', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/run/datatable.vue\"\nexport default component.exports"],"sourceRoot":""}